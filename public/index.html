<!DOCTYPE html>
<html lang="fr">
<head>
  <style>
    body{
      visibility: hidden;
    }
  </style>
  <title>Chauffage</title>
  <script>
    fetch('head-common.html')
      .then(response => response.text())
      .then(data => {
        document.head.insertAdjacentHTML('beforeend', data);
      });
  </script>
</head>
<body>

  <div class="background"></div>

  <!-- BARRE BASSE -->
  <div id="bottom-bar">
    <button class="tab active" id="homeBtn" onclick="showHome()"><i class="fa-solid fa-house"></i></button>
    <button class="tab" id="helpBtn" onclick="showHelp()"><i class="fa-solid fa-circle-info"></i></button>
  </div>

  <div id="help-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); color:white; padding:20px; box-sizing: border-box; z-index: 3;">
    <div style="background:#004D00; padding:20px; border-radius:10px; max-width:400px; margin: 50px auto;">
      <h2>Aide et Support</h2>
      <p>Bienvenue dans la section d'aide. Ici, vous trouverez des informations pour vous aider à utiliser l'application de gestion du chalet.</p>
      <h3>Fonctionnalités Principales</h3>
      <ul>
        <li>Contrôle du chauffage</li>
        <li>Gestion de l'éclairage</li>
        <li>Surveillance de la sécurité</li>
      </ul>
      <h3>Contactez-nous</h3>
      <p>Si vous avez besoin d'aide supplémentaire, veuillez nous contacter à support@chaletmanagement.fr</p>
      <button onclick="showHome()">Fermer</button>
    </div>
  </div>

  <div id="content">
    <div id="auth">
      <h2>Connexion</h2>

      <input type="email" placeholder="Email" id="email" autocomplete="email">

      <input type="password" placeholder="Mot de passe" id="password" autocomplete="current-password">

      <div class="buttons">
        <button class="btn primary" id="loginBtn">Se connecter</button>
        <button class="btn secondary" id="signupBtn">Créer un compte</button>
      </div>
    </div>

    <div id="gauge-modal" class="hidden"> 
      <h2>Pilotage</h2>

      <div class="temp-card">
        <span class="temp-value">21.5</span>
        <span class="temp-unit">°C</span>
        <div class="temp-label">Temperature intérieure</div>
      </div>

      <div class ="setting-row">
        <span class="setting-label">Chauffage actif</span>

        <label class="ios-switch">
          <input type="checkbox" id="heaterToggle">
          <span class="slider"></span>
      </div>
    </div>

    <div id="settings-panel" class="hidden">
      <button class="parameter-btn danger" id="logoutBtn">
        <i class="fa-solid fa-right-from-bracket"></i>
        Se déconnecter
      </button>
    </div>

    <div id="confirm-logout" class="hidden">
      <div class="confirm-box">
        <p>Êtes-vous sûr de vouloir vous déconnecter ?</p>
        <div class="confirm-actions">
          <button class="btn trois" id="cancelLogoutBtn">Annuler</button>
          <button class="btn danger" id="confirmLogoutBtn">Se déconnecter</button>
        </div> 
      </div>
    </div>
  </div>

  <div id="message-box" class="message hidden"></div>

  <div id="common-body"></div>

  <script>
    fetch('body-common.html')
      .then(response => response.text())
      .then(html => {
        const container = document.getElementById('common-body');
        container.innerHTML = html;

        const script = Array.from(container.querySelectorAll('script'));
        let chain = Promise.resolve();

        script.forEach(script => {
          chain = chain.then(() => new Promise(resolve => {
              const newScript = document.createElement('script');
              if (script.src) {
                newScript.src = script.src;
                newScript.onload = resolve;
              } else {
                newScript.textContent = script.textContent;
                resolve();
              }
              document.body.appendChild(newScript);
            }));
          });
        });
  </script>

</body>
</html>